<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Todd Davies' Blog</title>
 <link href="http://todd-davies.github.io/" rel="self"/>
 <link href="http://todd-davies.github.io"/>
 <updated>2014-01-09T08:43:56+00:00</updated>
 <id>http://todd-davies.github.io</id>
 <author>
   <name>Todd Davies</name>
   <email></email>
 </author>

 
 <entry>
   <title>LaTeX and the Kindle</title>
   <link href="http://todd-davies.github.io/2014/01/08/latex-and-the-kindle"/>
   <updated>2014-01-08T00:00:00+00:00</updated>
   <id>http://todd-davies.github.io/2014/01/08/latex-and-the-kindle</id>
   <content type="html">&lt;p&gt;Just before Christmas I bought a Kindle, the main justification being that I could use it to read my university course notes on there rather than printing them all off and wasting reams of paper.&lt;/p&gt;

&lt;h2 id=&quot;the_problem&quot;&gt;The problem&lt;/h2&gt;

&lt;p&gt;I use &lt;a href=&quot;http://en.wikipedia.org/wiki/LaTeX&quot;&gt;LaTeX&lt;/a&gt; to produce my notes as &lt;code&gt;.pdf&lt;/code&gt; files, that up to now, have been formatted as A4 sized documents. However, if you’ve ever tried to view a pdf file on a &lt;a href=&quot;http://www.amazon.co.uk/gp/product/B007HCCOD0/ref=ksfs_sz&quot;&gt;kindle&lt;/a&gt; (I’ve got the basic model), then you’ll know that it maps each page of the pdf file on to the screen without any scaling. Ah.&lt;/p&gt;

&lt;p&gt;This is an understandable decision on Amazon’s part; the pdf format was created to be like ‘digital paper’, and so it might not be wise (or even feesable) to just reformat the file so that it fits nicely on the screen of the kindle. Uunfortunately, this results in the page being squashed down to less than half it’s original size, resulting in minute, even unreadable text. The kindle does offer zoom functionality, but it’s a pain to use, and ruins the experience.&lt;/p&gt;

&lt;p&gt;The solution was to set up my project so that two pdf files would be created when I compiled my notes file; one would be A4 formatted, and the other sized to fit a kindle screen.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2 id=&quot;the_solution&quot;&gt;The solution&lt;/h2&gt;

&lt;p&gt;I decided that the easiest and most logical way to produce two output pdf files was to split my LaTeX source file into multiple parts:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;content.tex&lt;/code&gt; - holds the actual content of the notes.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;packages.tex&lt;/code&gt; - holds the LaTeX packages required by the content file.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;meta.tex&lt;/code&gt; - holds information such as the name of the author and the title of the file.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;notes.tex&lt;/code&gt; - contains the style information for formatted A4 notes&lt;/li&gt;

&lt;li&gt;&lt;code&gt;kindle.tex&lt;/code&gt; - contains the style information for kindle formatted notes.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I then have a bash script that I run in order to compile the project and generate the pdf files:&lt;/p&gt;
&lt;table class='highlighttable'&gt;&lt;tr&gt;&lt;td class='linenos'&gt;&lt;div class='linenodiv'&gt;&lt;pre&gt;&lt;code class='bash'&gt;1
2
3
4
5&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class='code'&gt;&lt;div class='highlight'&gt;&lt;pre&gt;&lt;span class='c'&gt;#!/bin/bash&lt;/span&gt;
aspell -t check content.tex
aspell -t check meta.tex
pdflatex notes.tex
pdflatex kindle.tex
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;When I run &lt;code&gt;build.sh&lt;/code&gt;, the content files get spell checked and then both the notes and kindle files get compiled to produce &lt;code&gt;notes.pdf&lt;/code&gt; and &lt;code&gt;kindle.pdf&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;At the most basic level, the notes and kindle LaTeX files contain:&lt;/p&gt;
&lt;table class='highlighttable'&gt;&lt;tr&gt;&lt;td class='linenos'&gt;&lt;div class='linenodiv'&gt;&lt;pre&gt;&lt;code class='latex'&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class='code'&gt;&lt;div class='highlight'&gt;&lt;pre&gt;&lt;span class='k'&gt;\documentclass&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;article&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% =========================&lt;/span&gt;
&lt;span class='c'&gt;% Import packages required to style the file here (ommitted for brevity)&lt;/span&gt;
&lt;span class='c'&gt;% =========================&lt;/span&gt;

&lt;span class='c'&gt;% Import the packages required for content.tex&lt;/span&gt;
&lt;span class='k'&gt;\input&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;packages.tex&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% =========================&lt;/span&gt;
&lt;span class='c'&gt;% Style code goes here (ommitted for brevity)&lt;/span&gt;
&lt;span class='c'&gt;% =========================&lt;/span&gt;

&lt;span class='k'&gt;\begin&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;document&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% Get the author, the title etc&lt;/span&gt;
&lt;span class='k'&gt;\input&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;meta.tex&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='k'&gt;\maketitle&lt;/span&gt;

&lt;span class='c'&gt;% Get the content of the file&lt;/span&gt;
&lt;span class='k'&gt;\input&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;content.tex&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='k'&gt;\end&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;document&lt;span class='nb'&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;The &lt;code&gt;packages.tex&lt;/code&gt; file contains all the packages used by &lt;code&gt;content.tex&lt;/code&gt;, and varies between different projects. The &lt;code&gt;meta.tex&lt;/code&gt; file is more intresting, since it defines macros for the title and author name:&lt;/p&gt;
&lt;table class='highlighttable'&gt;&lt;tr&gt;&lt;td class='linenos'&gt;&lt;div class='linenodiv'&gt;&lt;pre&gt;&lt;code class='latex'&gt;1
2
3
4
5
6
7&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class='code'&gt;&lt;div class='highlight'&gt;&lt;pre&gt;&lt;span class='c'&gt;% Set the author and title&lt;/span&gt;
&lt;span class='k'&gt;\newcommand&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;&lt;span class='k'&gt;\Author&lt;/span&gt;&lt;span class='nb'&gt;}{&lt;/span&gt;Todd Davies&lt;span class='nb'&gt;}&lt;/span&gt; 
&lt;span class='k'&gt;\newcommand&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;&lt;span class='k'&gt;\Title&lt;/span&gt;&lt;span class='nb'&gt;}{&lt;/span&gt;Title goes here&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% Meta&lt;/span&gt;
&lt;span class='k'&gt;\author&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;&lt;span class='k'&gt;\Author&lt;/span&gt;&lt;span class='nb'&gt;}&lt;/span&gt;
&lt;span class='k'&gt;\title&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;&lt;span class='k'&gt;\Title&lt;/span&gt;&lt;span class='nb'&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;h2 id=&quot;accomodating_for_the_kindle&quot;&gt;Accomodating for the kindle&lt;/h2&gt;

&lt;p&gt;In order to get the best layout for the kindle, I used the A5 paper size, and a 14pt text size and margins of 1cm:&lt;/p&gt;
&lt;table class='highlighttable'&gt;&lt;tr&gt;&lt;td class='linenos'&gt;&lt;div class='linenodiv'&gt;&lt;pre&gt;&lt;code class='latex'&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class='code'&gt;&lt;div class='highlight'&gt;&lt;pre&gt;&lt;span class='k'&gt;\documentclass&lt;/span&gt;&lt;span class='na'&gt;[a5paper]&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;article&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% Lets make the text nice and big&lt;/span&gt;
&lt;span class='k'&gt;\usepackage&lt;/span&gt;&lt;span class='na'&gt;[14pt]&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;extsizes&lt;span class='nb'&gt;}&lt;/span&gt;

&lt;span class='c'&gt;% Make the borders really small&lt;/span&gt;
&lt;span class='k'&gt;\usepackage&lt;/span&gt;[left=1cm,
            top=1cm,
            right=1cm,
            bottom=1cm,
            marginparwidth=0mm,
            marginparsep=0mm]&lt;span class='nb'&gt;{&lt;/span&gt;geometry&lt;span class='nb'&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;I also used the &lt;code&gt;breqn&lt;/code&gt; package along with the &lt;code&gt;dmath&lt;/code&gt; environment to split my equations over multiple lines if they exceeded the page width.&lt;/p&gt;

&lt;p&gt;I make extensive use of margin paragraphs in my notes, in fact, I have an extra wide right margin for them in the A4 version. However, they cause the text size of the page on the kindle to change between pages, since it will zoom out so that the margin can be seen on pages with margin paragraphs, and it will zoom in to omit the margin on pages without margin paragrahs. This was a big problem, since there was a lot of valuble information in there, so merely ommitting them from the kindle notes would be a shame.&lt;/p&gt;

&lt;p&gt;The solution was to make margin paragraphs inline on the kindle, to do this, I put this code in my &lt;code&gt;kindle.tex&lt;/code&gt; file:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='latex'&gt;&lt;span class='c'&gt;% Make margin paragrahs inline&lt;/span&gt;
&lt;span class='k'&gt;\renewcommand&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;&lt;span class='k'&gt;\marginpar&lt;/span&gt;&lt;span class='nb'&gt;}&lt;/span&gt;[1]&lt;span class='nb'&gt;{&lt;/span&gt;
&lt;span class='k'&gt;\begin&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;tcolorbox&lt;span class='nb'&gt;}&lt;/span&gt;[colback=white!5,colframe=white!40!black,title=Note:]
#1
&lt;span class='k'&gt;\end&lt;/span&gt;&lt;span class='nb'&gt;{&lt;/span&gt;tcolorbox&lt;span class='nb'&gt;}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The margin paragrahs now appear in the main body of the text, wrapped in a box that picks them out as containing extra information or remarks.&lt;/p&gt;

&lt;p&gt;I’ve got the a &lt;a href=&quot;https://github.com/Todd-Davies/latex-template&quot;&gt;template project&lt;/a&gt; set up on Github if you want to look at it. Any suggestions are welcome!&lt;/p&gt;</content>
 </entry>
 
 
</feed>